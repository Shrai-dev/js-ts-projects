(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(81),i=n.n(r),s=n(645),o=n.n(s)()(i());o.push([t.id,"* {\r\n  padding: 0;\r\n  margin: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    margin-left: 0%;\r\n  }\r\n\r\n  to {\r\n    margin-left: 100%;\r\n  }\r\n}\r\n\r\nbody {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  color: white;\r\n\r\n  text-transform: uppercase;\r\n  background-color: #363636;\r\n  margin: 0 8px;\r\n}\r\n\r\n.title {\r\n  text-align: center;\r\n  color: #e6c300;\r\n  margin: 0.3em 0;\r\n}\r\n\r\n.subtitle {\r\n  margin-block-start: 0.23em;\r\n  margin-block-end: 0.23em;\r\n}\r\n\r\n.container {\r\n  min-width: 500px;\r\n  margin: 0 auto;\r\n  overflow: hidden;\r\n  max-width: 600px;\r\n}\r\n\r\n.wrapper {\r\n  display: flex;\r\n  width: 300%;\r\n}\r\n\r\n#garage-view,\r\n#winners-view {\r\n  min-width: 500px;\r\n  max-width: 600px;\r\n  margin-right: 500px;\r\n}\r\n\r\n#car-icon {\r\n  width: 32px;\r\n  height: 32px;\r\n}\r\n\r\n.race-controls {\r\n  margin-top: 10px;\r\n}\r\n\r\n.garage {\r\n  min-width: 500px;\r\n}\r\n\r\n.garage li {\r\n  list-style-type: none;\r\n  padding-top: 10px;\r\n  border-bottom: 5px dashed #dadada;\r\n}\r\n\r\nul.garage {\r\n  list-style-type: none;\r\n  margin-block-start: 0;\r\n  margin-block-end: 0;\r\n  padding-inline-start: 0;\r\n}\r\n\r\n.road {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-end;\r\n}\r\n\r\n.launch-pad {\r\n  display: flex;\r\n  align-items: center;\r\n  width: 100%;\r\n}\r\n\r\n.launch-pad .control-panel {\r\n  margin-right: 10px;\r\n  display: flex;\r\n}\r\n\r\n.road .flag {\r\n  position: absolute;\r\n  right: 0;\r\n  bottom: 0;\r\n  height: 32px;\r\n  width: 32px;\r\n  color: red;\r\n  font-size: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.car.drive {\r\n  animation-fill-mode: forwards;\r\n  animation-name: slideIn;\r\n}\r\n\r\n.car.drive.crash {\r\n  animation-play-state: paused;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 10px;\r\n}\r\n\r\n.table-wins,\r\n.table-time {\r\n  cursor: pointer;\r\n}\r\n\r\n.table-wins:hover,\r\n.table-time:hover {\r\n  transform: scale(1.1);\r\n  filter: brightness(0.5);\r\n}\r\n\r\nth:nth-child(3),\r\ntr:nth-child(3) {\r\n  margin-left: 3px;\r\n  width: 60px;\r\n}\r\n\r\n.message-wrap {\r\n  position: absolute;\r\n  top: 35vh;\r\n  left: 0;\r\n  right: 0;\r\n  width: 28vw;\r\n  height: 50px;\r\n  margin: 0 auto;\r\n  z-index: 2;\r\n}\r\n\r\n#message.visible {\r\n  color: #12e953;\r\n  font-size: 26px;\r\n  background-color: #363636;\r\n  text-align: center;\r\n}\r\n",""]);const a=o},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,i,s){"string"==typeof t&&(t=[[null,t,void 0]]);var o={};if(r)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(o[c]=!0)}for(var d=0;d<t.length;d++){var l=[].concat(t[d]);r&&o[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),i&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=i):l[4]="".concat(i)),e.push(l))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var s={},o=[],a=0;a<t.length;a++){var c=t[a],d=r.base?c[0]+r.base:c[0],l=s[d]||0,u="".concat(d," ").concat(l);s[d]=l+1;var m=n(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==m)e[m].references++,e[m].updater(h);else{var g=i(h,r);r.byIndex=a,e.splice(a,0,{identifier:u,updater:g,references:1})}o.push(u)}return o}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var s=r(t=t||[],i=i||{});return function(t){t=t||[];for(var o=0;o<s.length;o++){var a=n(s[o]);e[a].references--}for(var c=r(t,i),d=0;d<s.length;d++){var l=n(s[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}s=c}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var s=e[r]={id:r,exports:{}};return t[r](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{const t=t=>`\n  <h2 class='title'>Garage (${String(t.carsCount)})</h2>\n  <h3 class='subtitle'>Page #${String(t.carsPage)}</h3>\n  <ul class="garage">\n    ${t.cars.map((t=>`\n      <li>${(({id:t,name:e,color:n},r)=>`\n  <div class="general-buttons">\n    <button class="button select-button" id="select-cars${t}">Select</button>\n    <button class="button remove-button" id="remove-cars${t}">Remove</button>\n    <span class="car-name">${e}</span>\n  </div>\n  <div class="road">\n    <div class="launch-pad">\n      <div class="control-panel">\n        <button class="icon start-engine-button" id="start-engine-car-${t}" ${r?"disabled":""}>A</button>\n        <button class="icon stop-engine-button" id="stop-engine-car-${t}" ${r?"":"disabled"}>B</button>\n      </div>\n      <div class="car" id="car-${t}">\n        \n          <svg id="car-icon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 1000 1000" enable-background="new 0 0 1000 1000" xml:space="preserve">\n          <g><path fill="${n}" d="M685,666.4c0,50.3,40.8,91.1,91.1,91.1s91.1-40.8,91.1-91.1c0-50.3-40.8-91.1-91.1-91.1C725.7,575.3,685,616.1,685,666.4z M714.7,666.4c0-33.9,27.5-61.3,61.3-61.3s61.3,27.5,61.3,61.3s-27.5,61.3-61.3,61.3C742.2,727.7,714.7,700.3,714.7,666.4z M91.4,666.4c0,50.3,40.8,91.1,91.1,91.1c50.3,0,91.1-40.8,91.1-91.1c0-50.3-40.8-91.1-91.1-91.1C132.2,575.3,91.4,616.1,91.4,666.4z M121.2,666.4c0-33.9,27.5-61.3,61.3-61.3c33.9,0,61.3,27.5,61.3,61.3s-27.5,61.3-61.3,61.3C148.6,727.7,121.2,700.3,121.2,666.4z M11.7,501.4c-2.5,36.1-1.6,85.5-1.4,114.6c3.7,39.2,15.6,50.4,60.4,62.7c6.8-124.4,110-137.6,158.2-116c71.8,32.1,68.9,115.2,68.9,115.2h363.1c0,0-5.6-66.3,51.9-106.5c56.6-39.6,173.7-10.3,170.2,106.5c33.5,14.7,140.4-2.3,96.7-165.9c-18.3-51.6-53.9-32.4-198-75.3c-64.6-19.2-77.6-89.2-183.6-173.9c-24.7-19.7-73.6-20.2-101.6-20.3C288.8,242,166.7,332.1,84.3,425.4C44.3,443.9,22.5,471.3,11.7,501.4L11.7,501.4z M909.1,556.2c-3.5-5.2-2.7-13.1,0-20.8h60c0,0,10.3,19.3-0.8,50.3C954.8,586.2,934.2,593.1,909.1,556.2L909.1,556.2z M437.6,435.9V284.1c0,0,106.7-24.5,130.4-0.8c23.6,23.6,128.4,127,130,130.5c1.6,3.5,7.9,14.7,0,22.1H437.6L437.6,435.9z M177.9,406.4c97.6-97.8,195.9-111.3,195.9-111.3v132.4l-5.9,8.4c0,0-167.4-1.7-180.7-1.7C173.9,434.2,170.6,413.7,177.9,406.4z M19.2,507.6h53.2c-7.3,38.8-35.5,46.1-35.5,46.1H19.2V507.6z"/></g>\n          </svg>\n        \n      </div>\n    </div>\n    <div class="flag" id="flag-${t}">&#9873;</div>\n  </div>\n`)(t,!1)}</li>\n    `)).join("")}\n  </ul>\n`,e=t=>`\n  <h2 class='title'>Winners (${t.winnersCount})</h2>\n  <h3 class='subtitle'>Page #${t.winnersPage}</h3>\n  <table class='table' cellspacing="0" border="0" cellpadding="0">\n    <thead>\n      <th>Number</th>\n      <th>Car name</th>\n      <th class="table-button table-wins ${"wins"===t.sortBy?t.sortOrder:""}" id="sort-by-wins">Wins</th>\n      <th class="table-button table-time ${"time"===t.sortBy?t.sortOrder:""}" id="sort-by-time">Best time\n      </th>\n    </thead>\n    <tbody>\n      ${[...t.winners].map(((t,e)=>`\n            <tr>\n              <td>${e+1}</td>\n              <td>${t.car[0].name}</td>\n              <td>${t.wins}</td>\n              <td>${t.time}</td>\n            </tr>\n          `)).join("")}\n    </tbody>\n  </table>\n`;const r=class{constructor(n){this.render=n=>{return r=this,i=void 0,o=function*(){const r=`\n        <div class="menu">\n          <button class="button garage-menu-button primary" id="garage-menu">To garage</button>\n          <button class="button winners-menu-button primary" id="winners-menu">To winners</button>\n        </div>\n        <div class="wrapper">\n          <div id="garage-view">\n            <div>\n              <form class="form" id="create">\n                <input class="input" type="text" name="name" id="create-name">\n                <input class="input" type="color" value="#ffffff" name="color" id="create-color">\n                <button class="button" type="submit" >Create</button>\n              </form>\n              <form class="form" id="update">\n                <input class="input" type="text" name="name" id="update-name" disabled>\n                <input class="input" type="color" value="#ffffff" name="color" id="update-color" disabled>\n                <button class="button" type="submit" >Update</button>\n              </form>\n            </div>\n            <div class="race-controls">\n              <button class="button race-button primary" id="race">Race</button>\n              <button class="button reset-button primary" id="reset">Reset</button>\n              <button class="button generator-button" id="generator">Generate cars</button>\n            </div>\n            <div id="garage">\n              ${t(n)}\n            </div>\n            <div class="message-wrap">\n              <p class="message" id="message"></p>\n            </div>\n          </div>\n          <div id="winners-view" >\n            ${e(n)}\n          </div>\n          </div>\n          <div class="pagination">\n            <button class="button primary prev-button" disabled id="prev">Prev</button>\n            <button class="button primary next-button" disabled id="next">Next</button>\n          </div>\n    `,i=document.createElement("div");i.classList.add("container"),i.innerHTML=r,document.body.appendChild(i)},new((s=void 0)||(s=Promise))((function(t,e){function n(t){try{c(o.next(t))}catch(t){e(t)}}function a(t){try{c(o.throw(t))}catch(t){e(t)}}function c(e){var r;e.done?t(e.value):(r=e.value,r instanceof s?r:new s((function(t){t(r)}))).then(n,a)}c((o=o.apply(r,i||[])).next())}));var r,i,s,o},this.store=Object.assign({},n)}},i="http://127.0.0.1:3000",s=`${i}/garage`,o=`${i}/engine`,a=`${i}/winners`;var c=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};const d=t=>c(void 0,void 0,void 0,(function*(){return(yield fetch(s,{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()})),l=(t,e=7)=>c(void 0,void 0,void 0,(function*(){const n=yield fetch(`${s}?_page=${t}&_limit=${e}`);return{items:yield n.json(),count:n.headers.get("X-Total-Count")}})),u=t=>c(void 0,void 0,void 0,(function*(){return(yield fetch(`${s}/?id=${t}`)).json()})),m=t=>c(void 0,void 0,void 0,(function*(){const e=document.getElementById(`start-engine-car-${t}`);e.disabled=!0,e.classList.toggle("enabling",!0);const{velocity:n,distance:r}=yield(t=>c(void 0,void 0,void 0,(function*(){return(yield fetch(`${o}?id=${t}&status=started`,{method:"PATCH"})).json()})))(t),i=Math.round(r/n);e.classList.toggle("enabling",!1),document.getElementById(`stop-engine-car-${t}`).disabled=!1;const s=document.getElementById(`car-${t}`);s.style.animationDuration=`${(i/1e3).toFixed(2)}s`,s.classList.add("drive");const a=yield fetch(`${o}?id=${t}&status=drive`,{method:"PATCH"}),d=a.status;return 200!==a.status&&s.classList.add("crash"),{status:d,id:t,time:i}})),h=t=>c(void 0,void 0,void 0,(function*(){const e=document.getElementById(`stop-engine-car-${t}`);e.disabled=!0,e.classList.toggle("enabling",!0),yield(t=>fetch(`${o}?id=${t}?status=stopped`,{method:"PATCH"}))(t),e.classList.toggle("enabling",!1),document.getElementById(`start-engine-car-${t}`).disabled=!1;const n=document.getElementById(`car-${t}`);n.classList.remove("crash"),n.classList.remove("drive"),n.style.animationPlayState="initial"}));var g=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};const p=(t,e,n,r=10)=>g(void 0,void 0,void 0,(function*(){const i=yield fetch(`${a}?_page=${t}&_limit=${r}${s=e,o=n,s&&o?`&_sort=${s}&_order=${o}`:""}`,{method:"GET"}).catch();var s,o;const c=yield i.json();return{items:yield Promise.all(c.map((t=>g(void 0,void 0,void 0,(function*(){return Object.assign(Object.assign({},t),{car:yield u(t.id)})}))))),count:i.headers.get("X-Total-Count")}})),v=["Tesla","Mersedes","BMW","Toyota","Zhiguli","Moskwich","Opel","Aston Martin","Porshe"],b=["Model S","CLK","7","Camry","Combi","9","Corsa","DB9","Cayene"],y=()=>{const t="0123456789abcdef";let e="#";for(let n=0;n<6;n++)e+=t[Math.floor(Math.random()*t.length)];return e},f=t=>{if(!t.isRace){const e="garage"===t.view?7:t.limit,n="garage"===t.view?t.carsCount:t.winnersCount,r="garage"===t.view?t.carsPage:t.winnersPage;document.getElementById("next").disabled=!(r*e<n),document.getElementById("prev").disabled=!(r>1)}};var w=function(t,e,n,r){return new(n||(n=Promise))((function(i,s){function o(t){try{c(r.next(t))}catch(t){s(t)}}function a(t){try{c(r.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((r=r.apply(t,e||[])).next())}))};const x=t=>w(void 0,void 0,void 0,(function*(){const{items:e,count:n}=yield l(t.carsPage);t.cars=e,t.carsCount=+n,document.getElementById("next").disabled=!(7*t.carsPage<t.carsCount),document.getElementById("prev").disabled=!(t.carsPage>1)})),E=(t,e)=>w(void 0,void 0,void 0,(function*(){const{items:e,count:n}=yield p(t.winnersPage,t.sortBy,t.sortOrder,t.limit);t.winners=e,t.winnersCount=+n,document.getElementById("next").disabled=!(10*t.winnersPage<t.winnersCount),document.getElementById("prev").disabled=!(t.winnersPage>1)}));class ${constructor(t,e){this.targets=t,this.store=Object.assign({},e),this.draw=new r(this.store),this.selectedCar={},this.base=i,this.garage=s,this.engine=o,this.winners=a,this.onEvent=t=>this.dispApi(t),this.classTargets=this.targets.map((t=>`.${t}`)).join(", "),this.clicked=document.querySelectorAll(this.classTargets)}setEvents(){[...this.clicked].map((t=>t.addEventListener("click",this.onEvent)))}setEventsSubmit(){document.getElementById("update").addEventListener("submit",(t=>this.dispApi(t))),document.getElementById("create").addEventListener("submit",(t=>this.dispApi(t)))}dispApi(n){return r=this,i=void 0,w=function*(){if("click"===n.type)switch(this.targets.filter((t=>n.target.classList.contains(t)))[0]){case"start-engine-button":{const t=+n.target.id.split("start-engine-car-")[1];yield m(t);break}case"stop-engine-button":{const t=+n.target.id.split("stop-engine-car-")[1];yield h(t);break}case"select-button":this.selectedCar=(yield u(+n.target.id.split("select-cars")[1]))[0],document.getElementById("update-name").value=this.selectedCar.name,document.getElementById("update-color").value=this.selectedCar.color,document.getElementById("update-name").disabled=!1,document.getElementById("update-color").disabled=!1,document.querySelector("#update>button").disabled=!1;break;case"remove-button":{const e=+n.target.id.split("remove-cars")[1];yield(t=>c(void 0,void 0,void 0,(function*(){return(yield fetch(`${s}/${t}`,{method:"DELETE"})).json()})))(e),yield((t,e)=>g(void 0,void 0,void 0,(function*(){return(yield fetch(`${t}/${e}`,{method:"DELETE"})).json()})))(a,e),yield x(this.store),document.getElementById("garage").innerHTML=t(this.store);break}case"generator-button":{n.target.disabled=!0;const e=((t=100)=>new Array(t).fill(1).map((()=>({name:`${v[Math.floor(Math.random()*v.length)]} ${b[Math.floor(Math.random()*b.length)]}`,color:y()}))))();yield Promise.all(e.map((t=>d(t)))),yield x(this.store);const{items:r,count:i}=yield l(1);this.store.cars=r,this.store.carsCount=+i,document.getElementById("garage").innerHTML=t(this.store),n.target.disabled=!1;break}case"race-button":{n.target.disabled=!0,this.store.isRace=!0,[...this.clicked].map((t=>t.disabled=!0)),[...document.querySelectorAll('button[type="submit"]')].map((t=>t.disabled=!0)),document.querySelector(".garage-menu-button").disabled=!1,document.querySelector(".winners-menu-button").disabled=!1;const t=this.store.cars.map((t=>m(+t.id))),r=yield Promise.all(t),i=(yield Promise.all(r.map((t=>t)))).filter((t=>200===t.status)).sort(((t,e)=>t.time-e.time))[0];yield(({id:t,time:e})=>g(void 0,void 0,void 0,(function*(){const n=yield(t=>g(void 0,void 0,void 0,(function*(){return(yield fetch(`${a}/${t}`)).status})))(t);if(404===n)yield(r={id:t,wins:1,time:+(+e/1e3).toFixed(3)},g(void 0,void 0,void 0,(function*(){return(yield fetch(a,{method:"POST",body:JSON.stringify(r),headers:{"Content-Type":"application/json"}})).json()})));else{const n=yield(t=>g(void 0,void 0,void 0,(function*(){return(yield fetch(`${a}/${t}`)).json()})))(t);yield((t,e)=>g(void 0,void 0,void 0,(function*(){return(yield fetch(`${a}/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json()})))(t,{id:t,wins:n.wins+1,time:+(+e/1e3).toFixed(3)<+n.time?+(+e/1e3).toFixed(3):+n.time})}var r})))(i),yield p(1,"","",10),yield E(this.store,this.winners),e(this.store),[...this.clicked].map((t=>t.disabled=!0));const s=document.getElementById("message"),o=this.store.cars.filter((t=>+t.id===i.id))[0].name;s.innerHTML=`${o} went first (${i.time}s)!`,s.classList.add("visible"),document.querySelector(".reset-button").disabled=!1,document.querySelector(".garage-menu-button").disabled=!1,document.querySelector(".winners-menu-button").disabled=!1;break}case"reset-button":{n.target.disabled=!0,this.store.cars.map((({id:t})=>h(+t)));const t=document.getElementById("message");t.innerHTML="",t.classList.remove("visible"),document.getElementById("race").disabled=!1,n.target.disabled=!1,[...this.clicked].map((t=>t.disabled=!1)),[...document.querySelectorAll(".stop-engine-button")].map((t=>t.disabled=!0)),[...document.querySelectorAll('button[type="submit"]')].map((t=>t.disabled=!1)),this.store.isRace=!1,f(this.store);break}case"prev-button":"garage"===this.store.view?(this.store.carsPage-=1,yield x(this.store),document.getElementById("garage").innerHTML=t(this.store)):"winners"===this.store.view&&(this.store.winnersPage-=1,yield E(this.store,this.winners),document.getElementById("winners-view").innerHTML=e(this.store));break;case"next-button":switch(this.store.view){case"garage":this.store.carsPage+=1,yield x(this.store),document.getElementById("garage").innerHTML=t(this.store);break;case"winners":this.store.winnersPage+=1,yield E(this.store,this.winners),document.getElementById("winners-view").innerHTML=e(this.store)}break;case"garage-menu-button":this.store.view="garage",document.getElementById("garage-view").style.order="-1",document.getElementById("winners-view").style.order="",f(this.store),document.querySelector(".message-wrap").style.display="block";break;case"winners-menu-button":this.store.view="winners",f(this.store),document.querySelector(".message-wrap").style.display="none",document.getElementById("garage-view").style.order="",document.getElementById("winners-view").style.order="-1",yield E(this.store,this.winners),document.getElementById("winners-view").innerHTML=e(this.store);break;case"table-wins":{this.store.sortBy="wins",this.store.sortOrder="ASC"===this.store.sortOrder?"DESC":"ASC";const{items:t,count:n}=yield p(this.store.winnersPage,this.store.sortBy,this.store.sortOrder,this.store.limit);this.store.winners=t,this.store.winnersCount=+n;const r=e(this.store);document.getElementById("winners-view").innerHTML="",document.getElementById("winners-view").innerHTML=r;break}case"table-time":{this.store.sortBy="time",this.store.sortOrder="ASC"===this.store.sortOrder?"DESC":"ASC";const{items:t,count:n}=yield p(this.store.winnersPage,this.store.sortBy,this.store.sortOrder,this.store.limit);this.store.winners=t,this.store.winnersCount=+n;const r=e(this.store);document.getElementById("winners-view").innerHTML="",document.getElementById("winners-view").innerHTML=r;break}}else if("submit"===n.type)switch(n.target.id){case"create":{n.preventDefault();const e=n.target,r=Object.fromEntries(new Map([...e].filter((t=>!!t.name)).map((t=>[t.name,t.value]))));yield d(r),yield x(this.store),document.getElementById("garage").innerHTML=t(this.store),document.getElementById("create-name").value="";break}case"update":{n.preventDefault();const e=n.target,o=Object.fromEntries(new Map([...e].filter((t=>!!t.name)).map((t=>[t.name,t.value]))));yield(r=+this.selectedCar.id,i=o,c(void 0,void 0,void 0,(function*(){return(yield fetch(`${s}/${r}`,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}})).json()}))),yield x(this.store),document.getElementById("garage").innerHTML=t(this.store),document.getElementById("update-name").value="",document.getElementById("update-name").disabled=!0,document.getElementById("update-color").disabled=!0,document.querySelector("#update>button").disabled=!0,document.getElementById("update-color").value="#ffffff",this.selectedCar={};break}}var r,i;f(this.store),this.clicked=document.querySelectorAll(this.classTargets),[...this.clicked].map((t=>t.removeEventListener("click",this.onEvent))),[...this.clicked].map((t=>t.addEventListener("click",this.onEvent)))},new((o=void 0)||(o=Promise))((function(t,e){function n(t){try{a(w.next(t))}catch(t){e(t)}}function s(t){try{a(w.throw(t))}catch(t){e(t)}}function a(e){var r;e.done?t(e.value):(r=e.value,r instanceof o?r:new o((function(t){t(r)}))).then(n,s)}a((w=w.apply(r,i||[])).next())}));var r,i,o,w}}class C{constructor(t){this.store=Object.assign({},t),this.base=i,this.garage=s,this.engine=o,this.winners=a,this.parents=null,this.targets=["start-engine-button","stop-engine-button","select-button","remove-button","generator-button","race-button","reset-button","prev-button","next-button","garage-menu-button","winners-menu-button","table-wins","table-time"],this.dispatch=new $(this.targets,this.store),this.req=""}getApi(t){return e=this,n=void 0,i=function*(){switch(this.req=t,t){case"getAppCars":{const{items:t,count:e}=yield l(1);return this.store.cars=t,this.store.carsCount=+e,this.store}case"getAppWinners":{const{items:t,count:e}=yield p(1,"","",10);return this.store.winners=t,this.store.winnersCount=+e,this.store}case"getWinners":{const{items:t,count:e}=yield p(1,"","",10);this.store.winners=t,this.store.winnersCount=+e;break}}},new((r=void 0)||(r=Promise))((function(t,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(t){t(n)}))).then(o,a)}c((i=i.apply(e,n||[])).next())}));var e,n,r,i}}const B={carsPage:1,cars:[],carsCount:0,winnersPage:1,animation:{},winners:[],winnersCount:0,view:"garage",sortBy:"id",sortOrder:"ASC",limit:10,isRace:!1};var I=n(379),T=n.n(I),M=n(795),P=n.n(M),k=n(569),L=n.n(k),S=n(565),A=n.n(S),j=n(216),O=n.n(j),H=n(589),q=n.n(H),z=n(426),N={};N.styleTagTransform=q(),N.setAttributes=A(),N.insert=L().bind(null,"head"),N.domAPI=P(),N.insertStyleElement=O(),T()(z.Z,N),z.Z&&z.Z.locals&&z.Z.locals,(new class{constructor(){this.store=B,this.api=new C(this.store),this.draws=new r(this.store),this.parents=null,this.targets=["start-engine-button","stop-engine-button","select-button","remove-button","generator-button","race-button","reset-button","prev-button","next-button","garage-menu-button","winners-menu-button","table-wins","table-time"],this.dispatch=new $(this.targets,this.store)}start(){return t=this,e=void 0,i=function*(){const t=yield this.api.getApi("getAppCars");t&&(this.store.cars=t.cars,this.store.carsCount=t.carsCount),yield this.api.getApi("getAppWinners"),this.draws=new r(this.store),yield this.draws.render(this.store),yield x(this.store),f(this.store),this.dispatch=new $(this.targets,this.store),this.dispatch.setEvents(),this.dispatch.setEventsSubmit()},new((n=void 0)||(n=Promise))((function(r,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function a(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(o,a)}c((i=i.apply(t,e||[])).next())}));var t,e,n,i}}).start()})()})();